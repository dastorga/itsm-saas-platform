<svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 18px sans-serif; text-anchor: middle; }
      .subtitle { font: 14px sans-serif; text-anchor: middle; }
      .label { font: 12px sans-serif; text-anchor: middle; }
      .small-label { font: 10px sans-serif; text-anchor: middle; }
      .step-number { font: bold 14px sans-serif; text-anchor: middle; fill: white; }
      .user { fill: #f06292; stroke: #c2185b; stroke-width: 2; }
      .frontend { fill: #4fc3f7; stroke: #0277bd; stroke-width: 2; }
      .backend { fill: #81c784; stroke: #388e3c; stroke-width: 2; }
      .database { fill: #ffb74d; stroke: #f57c00; stroke-width: 2; }
      .arrow { stroke: #424242; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .response-arrow { stroke: #1976d2; stroke-width: 2; fill: none; marker-end: url(#arrowhead-blue); stroke-dasharray: 5,5; }
      .step-circle { fill: #424242; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#424242" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1976d2" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="450" y="30" class="title">Flujo de Datos - Creaci√≥n de Ticket</text>
  
  <!-- Actors -->
  <!-- User -->
  <rect x="50" y="80" width="120" height="80" class="user" rx="10"/>
  <text x="110" y="105" class="subtitle">üë§ Usuario</text>
  <text x="110" y="125" class="label">Cliente Web</text>
  <text x="110" y="145" class="small-label">Navegador</text>
  
  <!-- Frontend -->
  <rect x="250" y="80" width="150" height="80" class="frontend" rx="10"/>
  <text x="325" y="105" class="subtitle">‚ö° Angular App</text>
  <text x="325" y="125" class="label">Puerto 4200</text>
  <text x="325" y="145" class="small-label">SPA React</text>
  
  <!-- Backend -->
  <rect x="480" y="80" width="150" height="80" class="backend" rx="10"/>
  <text x="555" y="105" class="subtitle">üêç Django API</text>
  <text x="555" y="125" class="label">Puerto 8000</text>
  <text x="555" y="145" class="small-label">REST Framework</text>
  
  <!-- Database -->
  <rect x="710" y="80" width="120" height="80" class="database" rx="10"/>
  <text x="770" y="105" class="subtitle">üêò PostgreSQL</text>
  <text x="770" y="125" class="label">Puerto 5432</text>
  <text x="770" y="145" class="small-label">Database</text>
  
  <!-- Flow Steps -->
  
  <!-- Step 1: User Interaction -->
  <circle cx="30" cy="220" r="12" class="step-circle"/>
  <text x="30" y="225" class="step-number">1</text>
  <rect x="60" y="200" width="200" height="40" fill="#fff" stroke="#424242" stroke-width="1" rx="5"/>
  <text x="160" y="225" class="label">Usuario hace clic en "Crear Ticket"</text>
  
  <!-- Step 2: Navigation -->
  <circle cx="30" cy="280" r="12" class="step-circle"/>
  <text x="30" y="285" class="step-number">2</text>
  <rect x="60" y="260" width="200" height="40" fill="#fff" stroke="#424242" stroke-width="1" rx="5"/>
  <text x="160" y="285" class="label">Router navega a /tickets/create</text>
  
  <!-- Step 3: Form Display -->
  <circle cx="30" cy="340" r="12" class="step-circle"/>
  <text x="30" y="345" class="step-number">3</text>
  <rect x="60" y="320" width="200" height="40" fill="#fff" stroke="#424242" stroke-width="1" rx="5"/>
  <text x="160" y="345" class="label">Se carga el formulario de creaci√≥n</text>
  
  <!-- Step 4: Form Fill -->
  <circle cx="30" cy="400" r="12" class="step-circle"/>
  <text x="30" y="405" class="step-number">4</text>
  <rect x="60" y="380" width="200" height="40" fill="#fff" stroke="#424242" stroke-width="1" rx="5"/>
  <text x="160" y="405" class="label">Usuario llena el formulario</text>
  
  <!-- Step 5: Form Validation -->
  <circle cx="30" cy="460" r="12" class="step-circle"/>
  <text x="30" y="465" class="step-number">5</text>
  <rect x="280" y="440" width="200" height="40" fill="#fff" stroke="#424242" stroke-width="1" rx="5"/>
  <text x="380" y="465" class="label">Validaci√≥n en el frontend</text>
  
  <!-- Step 6: API Call -->
  <circle cx="30" cy="520" r="12" class="step-circle"/>
  <text x="30" y="525" class="step-number">6</text>
  <rect x="280" y="500" width="250" height="40" fill="#fff" stroke="#424242" stroke-width="1" rx="5"/>
  <text x="405" y="525" class="label">POST /api/tickets/ con JWT token</text>
  
  <!-- Step 7: Auth Check -->
  <circle cx="30" cy="580" r="12" class="step-circle"/>
  <text x="30" y="585" class="step-number">7</text>
  <rect x="550" y="560" width="200" height="40" fill="#fff" stroke="#424242" stroke-width="1" rx="5"/>
  <text x="650" y="585" class="label">Verificar autenticaci√≥n JWT</text>
  
  <!-- Step 8: Data Validation -->
  <circle cx="30" cy="640" r="12" class="step-circle"/>
  <text x="30" y="645" class="step-number">8</text>
  <rect x="550" y="620" width="200" height="40" fill="#fff" stroke="#424242" stroke-width="1" rx="5"/>
  <text x="650" y="645" class="label">Validar datos con serializers</text>
  
  <!-- API Request Details -->
  <rect x="300" y="200" width="300" height="120" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
  <text x="450" y="220" class="subtitle">üì§ Petici√≥n HTTP</text>
  <text x="320" y="245" class="small-label">Method: POST</text>
  <text x="320" y="260" class="small-label">URL: /api/tickets/</text>
  <text x="320" y="275" class="small-label">Headers: Authorization: Bearer {jwt}</text>
  <text x="320" y="290" class="small-label">Content-Type: application/json</text>
  <text x="320" y="305" class="small-label">Body: {title, description, type, priority...}</text>
  
  <!-- Database Operations -->
  <rect x="650" y="200" width="200" height="100" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
  <text x="750" y="220" class="subtitle">üóÉÔ∏è Operaciones DB</text>
  <text x="670" y="245" class="small-label">1. Verificar usuario</text>
  <text x="670" y="260" class="small-label">2. Verificar organizaci√≥n</text>
  <text x="670" y="275" class="small-label">3. Crear ticket</text>
  <text x="670" y="290" class="small-label">4. Generar n√∫mero √∫nico</text>
  
  <!-- Arrows - Request Flow -->
  <line x1="170" y1="220" x2="250" y2="220" class="arrow"/>
  <line x1="170" y1="280" x2="250" y2="280" class="arrow"/>
  <line x1="400" y1="280" x2="480" y2="280" class="arrow"/>
  <line x1="480" y1="460" x2="550" y2="460" class="arrow"/>
  <line x1="630" y1="520" x2="710" y2="520" class="arrow"/>
  
  <!-- Response Flow -->
  <text x="450" y="370" class="subtitle">üì• Respuesta Exitosa</text>
  <rect x="300" y="380" width="300" height="80" fill="#e8f5e8" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="320" y="400" class="small-label">Status: 201 Created</text>
  <text x="320" y="415" class="small-label">Body: {id, ticket_number, created_at...}</text>
  <text x="320" y="430" class="small-label">Location: /api/tickets/{id}/</text>
  <text x="320" y="445" class="small-label">Content-Type: application/json</text>
  
  <!-- Response Arrows -->
  <line x1="710" y1="540" x2="630" y2="540" class="response-arrow"/>
  <line x1="480" y1="420" x2="400" y2="420" class="response-arrow"/>
  <line x1="250" y1="420" x2="170" y2="420" class="response-arrow"/>
  
  <!-- Success Actions -->
  <rect x="60" y="480" width="200" height="80" fill="#e8f5e8" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="160" y="500" class="subtitle">‚úÖ Acciones de √âxito</text>
  <text x="80" y="520" class="small-label">‚Ä¢ Mostrar mensaje de √©xito</text>
  <text x="80" y="535" class="small-label">‚Ä¢ Limpiar formulario</text>
  <text x="80" y="550" class="small-label">‚Ä¢ Redireccionar a lista</text>
  
  <!-- Connection Lines -->
  <line x1="110" y1="160" x2="110" y2="200" class="arrow"/>
  <line x1="325" y1="160" x2="325" y2="440" class="arrow"/>
  <line x1="555" y1="160" x2="555" y2="560" class="arrow"/>
  <line x1="770" y1="160" x2="770" y2="200" class="arrow"/>
  
</svg>